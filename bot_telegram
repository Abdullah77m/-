import telebot
from telebot import types
import random

import os

bot = telebot.TeleBot(os.getenv("BOT_TOKEN"))

# Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø²Ø®Ø§Ø±Ù (Ø­Ø·ÙŠØª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù‡Ù†Ø§ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ø³ÙƒØ±Ø¨Øª)
zakharef = {
    "1": lambda name: ''.join([f"{c}ï¹¡" for c in name]),
    "2": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ“ğ“‘ğ“’ğ““ğ“”ğ“•ğ“–ğ“—ğ“˜ğ“™ğ“šğ“›ğ“œğ“ğ“ğ“Ÿğ“ ğ“¡ğ“¢ğ“£ğ“¤ğ“¥ğ“¦ğ“§ğ“¨ğ“©ğ“ªğ“«ğ“¬ğ“­ğ“®ğ“¯ğ“°ğ“±ğ“²ğ“³ğ“´ğ“µğ“¶ğ“·ğ“¸ğ“¹ğ“ºğ“»ğ“¼ğ“½ğ“¾ğ“¿ğ”€ğ”ğ”‚ğ”ƒ")),
    "3": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ”„ğ”…â„­ğ”‡ğ”ˆğ”‰ğ”Šâ„Œâ„‘ğ”ğ”ğ”ğ”ğ”‘ğ”’ğ”“ğ””â„œğ”–ğ”—ğ”˜ğ”™ğ”šğ”›ğ”œâ„¨ğ”ğ”Ÿğ” ğ”¡ğ”¢ğ”£ğ”¤ğ”¥ğ”¦ğ”§ğ”¨ğ”©ğ”ªğ”«ğ”¬ğ”­ğ”®ğ”¯ğ”°ğ”±ğ”²ğ”³ğ”´ğ”µğ”¶ğ”·")),
    "4": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ– ğ–¡ğ–¢ğ–£ğ–¤ğ–¥ğ–¦ğ–§ğ–¨ğ–©ğ–ªğ–«ğ–¬ğ–­ğ–®ğ–¯ğ–°ğ–±ğ–²ğ–³ğ–´ğ–µğ–¶ğ–·ğ–¸ğ–¹ğ–ºğ–»ğ–¼ğ–½ğ–¾ğ–¿ğ—€ğ—ğ—‚ğ—ƒğ—„ğ—…ğ—†ğ—‡ğ—ˆğ—‰ğ—Šğ—‹ğ—Œğ—ğ—ğ—ğ—ğ—‘ğ—’ğ—“")),
    "5": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ‘¨ğ‘©ğ‘ªğ‘«ğ‘¬ğ‘­ğ‘®ğ‘¯ğ‘°ğ‘±ğ‘²ğ‘³ğ‘´ğ‘µğ‘¶ğ‘·ğ‘¸ğ‘¹ğ‘ºğ‘»ğ‘¼ğ‘½ğ‘¾ğ‘¿ğ’€ğ’ğ’‚ğ’ƒğ’„ğ’…ğ’†ğ’‡ğ’ˆğ’‰ğ’Šğ’‹ğ’Œğ’ğ’ğ’ğ’ğ’‘ğ’’ğ’“ğ’”ğ’•ğ’–ğ’—ğ’˜ğ’™ğ’šğ’›")),
    "6": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ˜ˆğ˜‰ğ˜Šğ˜‹ğ˜Œğ˜ğ˜ğ˜ğ˜ğ˜‘ğ˜’ğ˜“ğ˜”ğ˜•ğ˜–ğ˜—ğ˜˜ğ˜™ğ˜šğ˜›ğ˜œğ˜ğ˜ğ˜Ÿğ˜ ğ˜¡ğ˜¢ğ˜£ğ˜¤ğ˜¥ğ˜¦ğ˜§ğ˜¨ğ˜©ğ˜ªğ˜«ğ˜¬ğ˜­ğ˜®ğ˜¯ğ˜°ğ˜±ğ˜²ğ˜³ğ˜´ğ˜µğ˜¶ğ˜·ğ˜¸ğ˜¹ğ˜ºğ˜»")),
    "7": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³")),
    "8": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ—”ğ—•ğ—–ğ——ğ—˜ğ—™ğ—šğ—›ğ—œğ—ğ—ğ—Ÿğ— ğ—¡ğ—¢ğ—£ğ—¤ğ—¥ğ—¦ğ—§ğ—¨ğ—©ğ—ªğ—«ğ—¬ğ—­ğ—®ğ—¯ğ—°ğ—±ğ—²ğ—³ğ—´ğ—µğ—¶ğ—·ğ—¸ğ—¹ğ—ºğ—»ğ—¼ğ—½ğ—¾ğ—¿ğ˜€ğ˜µğ˜¶ğ˜·ğ˜¸ğ˜¹ğ˜ºğ˜»")),
    "9": lambda name: name.upper().translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "ğ™°ğ™±ğ™²ğ™³ğ™´ğ™µğ™¶ğ™·ğ™¸ğ™¹ğ™ºğ™»ğ™¼ğ™½ğ™¾ğ™¿ğš€ğšğš‚ğšƒğš„ğš…ğš†ğš‡ğšˆğš‰")),
    "10": lambda name: name.upper().translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "ğŸ„°ğŸ„±ğŸ„²ğŸ„³ğŸ„´ğŸ„µğŸ„¶ğŸ„·ğŸ„¸ğŸ„¹ğŸ„ºğŸ„»ğŸ„¼ğŸ„½ğŸ„¾ğŸ„¿ğŸ…€ğŸ…ğŸ…‚ğŸ…ƒğŸ…„ğŸ……ğŸ…†ğŸ…‡ğŸ…ˆğŸ…‰")),
    "11": lambda name: f"{name}Ì·",
    "12": lambda name: f"{name}Ì²",
    "13": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ’œâ„¬ğ’ğ’Ÿâ„°â„±ğ’¢â„‹â„ğ’¥ğ’¦â„’â„³ğ’©ğ’ªğ’«ğ’¬â„›ğ’®ğ’¯ğ’°ğ’±ğ’²ğ’³ğ’´ğ’µğ’¶ğ’·ğ’¸ğ’¹â„¯ğ’»â„Šğ’½ğ’¾ğ’¿ğ“€ğ“ğ“‚ğ“ƒâ„´ğ“…ğ“†ğ“‡ğ“ˆğ“‰ğ“Šğ“‹ğ“Œğ“ğ“ğ“")),
    "14": lambda name: name.upper().translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "ğ“ğ“‘ğ“’ğ““ğ“”ğ“•ğ“–ğ“—ğ“˜ğ“™ğ“šğ“›ğ“œğ“ğ“ğ“Ÿğ“ ğ“¡ğ“¢ğ“£ğ“¤ğ“¥ğ“¦ğ“§ğ“¨ğ“©")),
    "15": lambda name: f"{name}âƒ ",
    "16": lambda name: name.translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", "ğ“ğ“‘ğ“’ğ““ğ“”ğ“•ğ“–ğ“—ğ“˜ğ“™ğ“šğ“›ğ“œğ“ğ“ğ“Ÿğ“ ğ“¡ğ“¢ğ“£ğ“¤ğ“¥ğ“¦ğ“§ğ“¨ğ“©ğ“ªğ“«ğ“¬ğ“­ğ“®ğ“¯ğ“°ğ“±ğ“²ğ“³ğ“´ğ“µğ“¶ğ“·ğ“¸ğ“¹ğ“ºğ“»ğ“¼ğ“½ğ“¾ğ“¿ğ”€ğ”ğ”‚ğ”ƒ")),
    "17": lambda name: ''.join([f"â“‡â“â“ƒâ““â“â“œ"[ord(c.upper()) % 7] if c.isalpha() else c for c in name]),
    "18": lambda name: 'ğŸ§¨' + 'ğŸ§¨'.join(name.upper()) + 'ğŸ§¨',
    "19": lambda name: name.upper().translate(str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "ğ”¸ğ”¹â„‚ğ”»ğ”¼ğ”½ğ”¾â„ğ•€ğ•ğ•‚ğ•ƒğ•„â„•ğ•†â„™â„šâ„ğ•Šğ•‹ğ•Œğ•ğ•ğ•ğ•â„¤")),
}

user_data = {}

@bot.message_handler(commands=['start'])
def start_handler(message):
    bot.send_message(message.chat.id, "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙŠÙƒ ğŸŒŸ\nØ£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ Ù„ØªØ²Ø®Ø±ÙÙ‡ Ø¨Ø£ÙŠ Ø´ÙƒÙ„ ÙŠØ¹Ø¬Ø¨Ùƒ.")
    user_data[message.from_user.id] = {"step": "awaiting_name"}

@bot.message_handler(func=lambda m: True)
def name_handler(message):
    user_id = message.from_user.id
    if user_id not in user_data or user_data[user_id]["step"] != "awaiting_name":
        return

    if not message.text or message.text.strip() == "":
        bot.send_message(message.chat.id, "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­ ÙˆØºÙŠØ± ÙØ§Ø±Øº âœï¸")
        return

    user_data[user_id]["name"] = message.text
    user_data[user_id]["step"] = "awaiting_category"

    markup = types.InlineKeyboardMarkup(row_width=2)
    markup.add(
        types.InlineKeyboardButton("ğŸ…°ï¸ Ø²Ø®Ø§Ø±Ù Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", callback_data="cat_english"),
        types.InlineKeyboardButton("ğŸ† Ø²Ø®Ø§Ø±Ù Ø¹Ø±Ø¨ÙŠØ©", callback_data="cat_arabic"),
        types.InlineKeyboardButton("ğŸ² Ø²Ø®Ø±ÙØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©", callback_data="random_zakhref")
    )
    markup.add(types.InlineKeyboardButton("ğŸ”™ Ø±Ø¬ÙˆØ¹", callback_data="back"))

    bot.send_message(message.chat.id, "Ø§Ø®ØªØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø²Ø®Ø±ÙØ© âœ¨ğŸ‘‡", reply_markup=markup)

@bot.callback_query_handler(func=lambda c: c.data.startswith("cat_"))
def category_handler(call):
    user_id = call.from_user.id
    name = user_data.get(user_id, {}).get("name", "")
    if not name:
        bot.answer_callback_query(call.id, "Ø£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!", show_alert=True)
        return

    if call.data == "cat_english":
        start = 1
        end = 10
    elif call.data == "cat_arabic":
        start = 11
        end = 15
    else:
        return

    markup = types.InlineKeyboardMarkup()
    for i in range(start, end + 1):
        try:
            preview = zakharef[str(i)](name)
        except:
            preview = name
        markup.add(types.InlineKeyboardButton(preview, callback_data=f"zakhref_{i}"))

    markup.add(types.InlineKeyboardButton("ğŸ”™ Ø±Ø¬ÙˆØ¹", callback_data="category_back"))
    bot.edit_message_text("Ø§Ø®ØªØ§Ø± Ø§Ù„Ø²Ø®Ø±ÙØ© Ø§Ù„ÙŠ ØªØ¹Ø¬Ø¨Ùƒ âœ¨", chat_id=call.message.chat.id, message_id=call.message.message_id, reply_markup=markup)

@bot.callback_query_handler(func=lambda c: c.data == "random_zakhref")
def random_zakhref_handler(call):
    user_id = call.from_user.id
    name = user_data.get(user_id, {}).get("name", "")
    if not name:
        bot.answer_callback_query(call.id, "Ø£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!", show_alert=True)
        return

    z_id = random.choice(list(zakharef.keys()))
    try:
        result = zakharef[z_id](name)
    except:
        result = name

    bot.send_message(call.message.chat.id, f"Ø²Ø®Ø±ÙØªÙƒ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ğŸ²:\n{result}\n\nğŸ“‹ Ø§Ø¶ØºØ· Ù…Ø·ÙˆÙ„Ù‹Ø§ Ù„Ù†Ø³Ø®Ù‡Ø§")

@bot.callback_query_handler(func=lambda c: c.data.startswith("zakhref_"))
def process_zakhref(call):
    user_id = call.from_user.id
    z_id = call.data.split("_")[1]
    name = user_data.get(user_id, {}).get("name", "")
    if not name:
        bot.answer_callback_query(call.id, "Ø£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!", show_alert=True)
        return

    if z_id in zakharef:
        try:
            result = zakharef[z_id](name)
        except:
            result = name
        bot.send_message(user_id, f"Ø²Ø®Ø±ÙØªÙƒ:\n{result}\n\nğŸ“‹ Ø§Ø¶ØºØ· Ù…Ø·ÙˆÙ„Ù‹Ø§ Ù„Ù†Ø³Ø®Ù‡Ø§")

@bot.callback_query_handler(func=lambda c: c.data == "category_back")
def back_to_categories(call):
    user_id = call.from_user.id
    user_data[user_id]["step"] = "awaiting_category"

    markup = types.InlineKeyboardMarkup(row_width=2)
    markup.add(
        types.InlineKeyboardButton("ğŸ…°ï¸ Ø²Ø®Ø§Ø±Ù Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", callback_data="cat_english"),
        types.InlineKeyboardButton("ğŸ† Ø²Ø®Ø§Ø±Ù Ø¹Ø±Ø¨ÙŠØ©", callback_data="cat_arabic"),
        types.InlineKeyboardButton("ğŸ² Ø²Ø®Ø±ÙØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©", callback_data="random_zakhref")
    )
    markup.add(types.InlineKeyboardButton("ğŸ”™ Ø±Ø¬ÙˆØ¹", callback_data="back"))
    bot.edit_message_text("Ø§Ø®ØªØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø²Ø®Ø±ÙØ© âœ¨ğŸ‘‡", chat_id=call.message.chat.id, message_id=call.message.message_id, reply_markup=markup)

@bot.callback_query_handler(func=lambda c: c.data == "back")
def go_back(call):
    user_id = call.from_user.id
    user_data[user_id]["step"] = "awaiting_name"
    bot.send_message(call.message.chat.id, "Ø±Ø¬Ø¹Ù†Ø§ âœ…\nØ£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ Ù…Ù† Ø¬Ø¯ÙŠØ¯ âœï¸")

bot.polling( 